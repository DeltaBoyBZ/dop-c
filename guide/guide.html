<html>
    <head> 
        <title> DOP-C Guide </title>
        <link rel="stylesheet" href="styles.css">
    </head>
    <body>
        <div id="content">
<h1 id="dop-c-a-guide">DOP-C : A Guide</h1>
<h3 id="matthew-smith">Matthew Smith</h3>
<p>A video version of this guide may be found at: <a href="https://youtu.be/KlliPAHqISk">https://youtu.be/KlliPAHqISk</a></p>
<h2 id="introduction">Introduction</h2>
<p>DOP-C is a header-only C++ library which makes it easy for developers to create data tables in C++. The idea is in the same vein as <a href="https://deltaboybz.github.io/tabular-cpp">Tabular-C++</a>, but learns from the shortcomings of that project. While Tabular-C++ has an awkward workflow relying on external code generation (via Python), DOP-C simply works if you include it in your source files, and all tables are constructed with C++ code.</p>
<p>DOP-C is being developed in-tandem with a new version of the <a href="https://github.com/DeltaBoyBZ/tabitha-sdk">Tabitha SDK</a>. As of writing, Tabitha’s new compiler is very early in development and not due for release anytime soon.</p>
<h2 id="getting-dop-c">Getting DOP-C</h2>
<p>All you need to start using DOP-C, is the header file <code>dopc.hpp</code>. The easiest way to get this is to clone the repository from GitHub:</p>
<pre><code>git clone https://github.com/DeltaBoyBZ/dop-c</code></pre>
<p>Make sure the directory <code>dop-c/include</code> is in your build system’s include path.</p>
<h2 id="creating-a-table">Creating a Table</h2>
<p>We introduce the basic usage of DOP-C by example. Create a new file <code>foo.cpp</code>:</p>
<pre><code>#include&quot;dopc/dopc.hpp&quot;

#include&lt;cstdlib&gt; 
#include&lt;iostream&gt;

class Data
{
    public:
        static dopc::Table table; 
        static dopc::Field&lt;int&gt; a; 
        static dopc::Field&lt;float&gt; b; 
};

dopc::Table Data::table; 
dopc::Field&lt;int&gt; Data::a(&amp;Data::table); 
dopc::Field&lt;float&gt; Data::b(&amp;Data::table); 

/*
rest of the file
*/</code></pre>
<p>The effect of this code, is the declaraion of a table with two fields (columns): an integer column <code>a</code>; and a float column <code>b</code>.<br />
By default, the table will have a <code>32</code> row capacity, but this will dynamically grow when needed. The capacity is not the same as the number of used rows, since of course this starts as <code>0</code>. The number of used rows is tracked by the <code>dopc::Table</code> class.</p>
<h2 id="adding-rows">Adding Rows</h2>
<p>We continue with our example in <code>foo.cpp</code>, and shall do so for the rest of this page. We manipulate the table inside the main method:</p>
<pre><code>/*
table creation code
*/

int main()
{
    //inserting a row and getting the row ID
    size_t x = Data::table.insert();   
    //setting table elements
    Data::a(x) = 69;
    Data::b(x) = 3.14f;
    //check elements have stored correctly
    std::cout &lt;&lt; Data::a(x) &lt;&lt; &quot;, &quot; &lt;&lt; Data::b(x) &lt;&lt; std::endl;
    return 0;
}</code></pre>
<p>We can add as many rows as we like. If you were to check the value of <code>x</code>, you should find that it is <code>0</code>. The row corresponding to ID <code>x</code> will also happen to be <code>0</code>, however in general this shall not be the case; there is a distinction between row indices and row IDs (or <em>keys</em>).</p>
<h2 id="deleting-rows">Deleting Rows</h2>
<p>To remove a row with key <code>x</code> from a table, is to do the following:</p>
<p><em>Suppose the table has</em> <code>n</code> <em>used rows. Then copy the row indexed</em> <code>(n-1)</code> <em>into the row with key</em> <code>x</code>.* <em>Then decrement the number of used rows by 1</em>.</p>
<p>Do delete a row with key <code>x</code>, simply use:</p>
<pre><code>Data:::table.remove(x);</code></pre>
<h2 id="referencing-elements">Referencing Elements</h2>
<p>We have already seen how to reference table elements according to row keys. We use round parentheses like:</p>
<pre><code>Data::a(x) = 27; //sets the element in field `a` and row with key `x` to value `27` </code></pre>
<p>We may sometimes choose to reference elements by their actual position in the table. For this, we index with square brackets <code>[]</code>.</p>
<pre><code>Data::b[k] = 9.81; // sets the element in field `b` in the `k`th row to value `9.81`.  </code></pre>
        </div>
    </body>
</html>
